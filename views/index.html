<!doctype html>
<html>
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Login</title>
<link href="bootstrap/css/bootstrap.min.css" rel="stylesheet">
<script src="//ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
</head>
<body>
<div class="container">
    <div class="col-md-8 col-md-offset-2">
        <h2>Login</h2>
        <!-- <form role="form"> -->
            <div class="form-group">
                <label for="inputEmail">Email address:</label>
                <input type="email" class="form-control"  placeholder="Type your email" id="email" required>
            </div>
            <div class="form-group">
                <label for="inputPassword">Password:</label>
                <input type="password" class="form-control"  placeholder="Type your password" id="password" required>
            </div>
            <button type="submit" class="btn btn-default" id="submit">Submit</button>
        <!-- </form> -->
    </div>
</div>
<script>
$(document).ready(function(){
    var email,pass;
    $("#submit").click(function(){
        email=$("#email").val();
        pass=$("#password").val();
        atpos = email.indexOf("@");
        dotpos = email.lastIndexOf(".");
        if (email=="" || pass=="") {
            console.log('form is empty');
        }else{
            if(atpos < 1 || ( dotpos - atpos < 2 )){
                $("#email").focus();
            }else{
                $.post("http://localhost:3000/login",{email:email,pass:pass},function(data){                
                    if(data==='done'){
                        window.location.href="/home";
                    }
                });
            }
        };
    });
});
//(function() {
//    var email, pass;
////        var submit = [].slice.call(document.querySelectorAll('#submit'));
//    submit = document.getElementById('submit');
//    console.log(submit);
//    submit.addEventListener('click', function(event) {
//        event.preventDefault();
//
//        email= document.getElementById('email').value;
//        pass = document.getElementById('password').value;
//        console.log(email);
//        console.log(pass);
//
//        var XHR = new XMLHttpRequest();
//        XHR.open("POST", "/login", true);
//        XHR.send({emai:email,pass:pass});
//    })
//})()
</script>
</body>
</html>